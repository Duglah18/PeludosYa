<?php 
    //paginador
    //Total Registro y por_pagina llegan por el controlador
    $total_paginas = ceil($totalregistro / $por_pagina);
    if(isset($_GET['error'])){
        echo "<h1>Ocurrio un error en la Adopcion</h1>";
    }
?>
<br>
<div class="container">
    <div class="card-panel indigo darken-4 center-align" style="height: 100px; border-radius: 100px;">
        <h3 class="container">Peluditos que puedes Adoptar</h3>
    </div>
</div>

<?php if($animales != false){ ?>
<br>
<div class="row">
<div class="card-panel indigo darken-4 col s3">
Aqui iran las categorias
</div>
    <div class="col s9">
        
        <?php foreach($animales as $animal){ ?>
            <div class="card indigo col s4">

                <div class="card-image"> 
                    <img src="<?=URL_BASE;?>img/animales/<?= $animal['img']?>" style=" width: 100%;"alt="Foto Animal">
                </div>

                <span class="card-title">
                    <h5 style="display: flex; align-items: center;">
                        <i class="material-icons">label</i>
                         Nombre: <?= $animal['nombre']; ?>
                    </h5>
                </span>
                <ul>
                <li style="display: flex; align-items: center;"> <i class="material-icons">insert_invitation</i> Edad: <?= 2022-$animal['anio_nac']; ?> Años</li>
                <li style="display: flex; align-items: center;"> <i class="material-icons">pets</i> Raza: <?= $animal['nomRaza']; ?></li>
                <li style="display: flex; align-items: center;"> <i class="material-icons">title</i> Tamaño: <?= $animal['tamanio']; ?></li>
                <li style="display: flex; align-items: center;"> <i class="material-icons">home</i> Alojado: <?= $animal['albergue']; ?></li>
                <li style="display: flex; align-items: center;"> <i class="material-icons">date_range</i> Ingreso: <?= $animal['fecha_ingreso'] = date("d-m-Y", strtotime($animal['fecha_ingreso'])); ?></li>
                </ul>
                <br>
                <div class="card-action white-text center-align">
                <a class="white-text" href="<?= BASE_URL?>session/mascota?idanimal=<?=$animal['id_animal']?>">Ver Animal</a>
                </div>
            </div>    
        <?php } ?>
            
    </div>
</div>
<div class="col-md-12 center text-center cyan lighten-2"><!--Paginador-->
    <ul class="pagination">
        <?php if($pagina != 1){ ?>
            <li class="waves-effect blue-text"><a href="<?=BASE_URL?>session/catalogoAnimales?pagina=1"><i class="material-icons">chevron_left</i><i class="material-icons">chevron_left</i></a></li>
            <li class="waves-effect"><a href="<?=BASE_URL?>session/catalogoAnimales?pagina=<?=$pagina - 1?>"><i class="material-icons">chevron_left</i></a></li>
        <?php
        }else{ ?>
            <li class="disabled"><a href=""><i class="material-icons">chevron_left</i><i class="material-icons">chevron_left</i></a></li>
            <li class="disabled"><a href=""><i class="material-icons">chevron_left</i></a></li>
    <?php
        } ?>
        
        
        <?php for($i = 1; $i <= $total_paginas; $i++){ 
            if ($i == $pagina){ ?>
                <li class="active"><a href="<?=BASE_URL?>session/catalogoAnimales?pagina=<?=$i?>"><?=$i?></a></li>
           <?php } else{
            ?>
            <li class="waves-effect"><a href="<?=BASE_URL?>session/catalogoAnimales?pagina=<?=$i?>"><?=$i?></a></li>
        <?php 
            }
        } ?>

        <?php if($pagina != $total_paginas){ ?>
        <li class="waves-effect"><a href="<?=BASE_URL?>session/catalogoAnimales?pagina=<?=$pagina + 1?>"><i class="material-icons">chevron_right</i></a></li>
        <li class="waves-effect"><a href="<?=BASE_URL?>session/catalogoAnimales?pagina=<?=$total_paginas?>"><i class="material-icons">chevron_right</i><i class="material-icons">chevron_right</i></a></li>
        <?php
        }else{ ?>
            <li class="disabled"><a href=""><i class="material-icons">chevron_right</i></a></li>
            <li class="disabled"><a href=""><i class="material-icons">chevron_right</i><i class="material-icons">chevron_right</i></a></li>
    <?php
        } ?>
    </ul>
</div>
<?php } else { ?>

    <h1>Aun no se encuentran Peluditos para adoptar Disponibles</h1>

<?php } ?>